import{f as C,g as L,h as t,i as R,j as S,k as M,l as J,o,c as b,m as i,n as h,q as c,a as p}from"./entry.f5a07536.js";import{u as T}from"./asyncData.090faa5e.js";import{u as d,d as m,H as U,S as V,L as $,e as q}from"./LoginView.78d7a22f.js";import"./index.esm.d51ffea6.js";import"./index.esm.225d1033.js";const z={class:"flex flex-column flex-grow-1 h-full"},D={class:"body-layout flex flex-grow-1 w-full h-full"},E={key:1},H=p("div",{class:"format-center w-full"},[p("h1",null,"Chào mừng bạn đến với phần mềm quản trị GIAYNAM.COM")],-1),I=[H],X={__name:"index",setup(K){const s=C(),x=L(),B=t("user"),_=t("token"),e=t("islogin"),l=R("cryptojs"),j=S().public.apiBase,r=S().public.SecretKey;d("tk");const O=d("usl"),v=d("jwt"),u=d("u");u.value!=null&&u.value!="undefined"&&m(u.value,r,l)!=null&&(t("user",()=>JSON.parse(m(u.value,r,l))),t("islogin",()=>!0)),O.value!=null&&v.value!=null&&t("token",()=>m(v.value,r,l)),`${_.value}`;const k=async()=>{var n=s.fullPath;if(!n)return!1;var g=n.split("/")[1];await T("sys_modules_getmodulefromlink_1",()=>$fetch("/api/Proc/getData",{method:"POST",baseURL:j,body:{str:q(JSON.stringify({proc:"sys_modules_getmodulefromlink_1",par:[{par:"link",va:g},{par:"user_id",va:B.value.user_id}]}),r,l).toString()},headers:{Authorization:`Bearer ${_.value}`}}).then(N=>{let P=JSON.parse(N.data),a=s.fullPath,y=Object.values(s.params);y.length>0&&y.forEach(f=>{let w=a.lastIndexOf("/"+f);w!=-1&&(a=a.substring(0,w))});let A=["/options","/helperview"];P[1].filter(f=>f.is_link==a).length==0&&!A.includes(a)&&x.push({path:"/admin"})}))};return M(e,()=>{s.fullPath&&s.fullPath.length>1&&e.value&&k()}),J(()=>{e.value&&k()}),(n,g)=>(o(),b("div",z,[i(e)?(o(),h(U,{key:0})):c("",!0),p("div",D,[i(e)?(o(),h(V,{key:0,class:"shadow-1 h-full"})):c("",!0),i(e)?(o(),b("div",E,I)):c("",!0),i(e)?c("",!0):(o(),h($,{key:2}))])]))}};export{X as default};
