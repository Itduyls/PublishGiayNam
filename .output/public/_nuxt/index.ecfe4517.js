import{x as Al,U as Nl,o as h,c as k,a as n,v as Z,s as Qe,y as ue,A as $e,b as u,E as Me,F as De,r as Il,q as m,_ as Kl,$ as Ml,j as Re,i as Ee,h as G,f as Dl,g as Rl,S as d,k as je,l as El,z as He,m as s,n as B,w as y,d as J,t as z,G as te,M as D,V as jl,C as re,N as Hl,p as Fl,e as Pl}from"./entry.f5a07536.js";import{u as ke,d as xe,f as Fe,c as Pe,g as Gl,h as Zl,H as Jl,S as Xl,L as Ql}from"./LoginView.78d7a22f.js";import{u as Yl,_ as Wl,r as Ce,m as we,a as et,e as lt}from"./index.esm.f4b8960c.js";import{s as tt,a as at}from"./dataview.esm.3d9cecee.js";import{s as Ge}from"./toolbar.esm.6c6ac948.js";import{b as nt,s as ot,a as it}from"./checkbox.esm.7ca7b5b9.js";import{s as Ze,a as Je}from"./dialog.esm.2590785c.js";import{b as N,c as st}from"./paginator.esm.82549e9d.js";import{s as rt,a as ut}from"./fileupload.esm.8cf01fcf.js";import{s as Xe}from"./treeselect.esm.a6cf84a4.js";import{s as q}from"./chip.esm.737eab89.js";import"./index.esm.d51ffea6.js";import"./asyncData.090faa5e.js";import"./index.esm.225d1033.js";import"./index.esm.67f03e0c.js";import"./index.esm.b76f7341.js";var Ye={name:"ThLargeIcon",extends:Al,computed:{pathId:function(){return"pv_icon_clip_".concat(Nl())}}},dt=["clipPath"],ct=n("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.90909 6.36364H4.45455C4.96087 6.36364 5.44645 6.1625 5.80448 5.80448C6.1625 5.44645 6.36364 4.96087 6.36364 4.45455V1.90909C6.36364 1.40277 6.1625 0.917184 5.80448 0.55916C5.44645 0.201136 4.96087 0 4.45455 0H1.90909C1.40277 0 0.917184 0.201136 0.55916 0.55916C0.201136 0.917184 0 1.40277 0 1.90909V4.45455C0 4.96087 0.201136 5.44645 0.55916 5.80448C0.917184 6.1625 1.40277 6.36364 1.90909 6.36364ZM1.46154 1.46154C1.58041 1.34268 1.741 1.27492 1.90909 1.27273H4.45455C4.62264 1.27492 4.78322 1.34268 4.90209 1.46154C5.02096 1.58041 5.08871 1.741 5.09091 1.90909V4.45455C5.08871 4.62264 5.02096 4.78322 4.90209 4.90209C4.78322 5.02096 4.62264 5.08871 4.45455 5.09091H1.90909C1.741 5.08871 1.58041 5.02096 1.46154 4.90209C1.34268 4.78322 1.27492 4.62264 1.27273 4.45455V1.90909C1.27492 1.741 1.34268 1.58041 1.46154 1.46154ZM1.90909 14H4.45455C4.96087 14 5.44645 13.7989 5.80448 13.4408C6.1625 13.0828 6.36364 12.5972 6.36364 12.0909V9.54544C6.36364 9.03912 6.1625 8.55354 5.80448 8.19551C5.44645 7.83749 4.96087 7.63635 4.45455 7.63635H1.90909C1.40277 7.63635 0.917184 7.83749 0.55916 8.19551C0.201136 8.55354 0 9.03912 0 9.54544V12.0909C0 12.5972 0.201136 13.0828 0.55916 13.4408C0.917184 13.7989 1.40277 14 1.90909 14ZM1.46154 9.0979C1.58041 8.97903 1.741 8.91128 1.90909 8.90908H4.45455C4.62264 8.91128 4.78322 8.97903 4.90209 9.0979C5.02096 9.21677 5.08871 9.37735 5.09091 9.54544V12.0909C5.08871 12.259 5.02096 12.4196 4.90209 12.5384C4.78322 12.6573 4.62264 12.7251 4.45455 12.7273H1.90909C1.741 12.7251 1.58041 12.6573 1.46154 12.5384C1.34268 12.4196 1.27492 12.259 1.27273 12.0909V9.54544C1.27492 9.37735 1.34268 9.21677 1.46154 9.0979ZM12.0909 6.36364H9.54544C9.03912 6.36364 8.55354 6.1625 8.19551 5.80448C7.83749 5.44645 7.63635 4.96087 7.63635 4.45455V1.90909C7.63635 1.40277 7.83749 0.917184 8.19551 0.55916C8.55354 0.201136 9.03912 0 9.54544 0H12.0909C12.5972 0 13.0828 0.201136 13.4408 0.55916C13.7989 0.917184 14 1.40277 14 1.90909V4.45455C14 4.96087 13.7989 5.44645 13.4408 5.80448C13.0828 6.1625 12.5972 6.36364 12.0909 6.36364ZM9.54544 1.27273C9.37735 1.27492 9.21677 1.34268 9.0979 1.46154C8.97903 1.58041 8.91128 1.741 8.90908 1.90909V4.45455C8.91128 4.62264 8.97903 4.78322 9.0979 4.90209C9.21677 5.02096 9.37735 5.08871 9.54544 5.09091H12.0909C12.259 5.08871 12.4196 5.02096 12.5384 4.90209C12.6573 4.78322 12.7251 4.62264 12.7273 4.45455V1.90909C12.7251 1.741 12.6573 1.58041 12.5384 1.46154C12.4196 1.34268 12.259 1.27492 12.0909 1.27273H9.54544ZM9.54544 14H12.0909C12.5972 14 13.0828 13.7989 13.4408 13.4408C13.7989 13.0828 14 12.5972 14 12.0909V9.54544C14 9.03912 13.7989 8.55354 13.4408 8.19551C13.0828 7.83749 12.5972 7.63635 12.0909 7.63635H9.54544C9.03912 7.63635 8.55354 7.83749 8.19551 8.19551C7.83749 8.55354 7.63635 9.03912 7.63635 9.54544V12.0909C7.63635 12.5972 7.83749 13.0828 8.19551 13.4408C8.55354 13.7989 9.03912 14 9.54544 14ZM9.0979 9.0979C9.21677 8.97903 9.37735 8.91128 9.54544 8.90908H12.0909C12.259 8.91128 12.4196 8.97903 12.5384 9.0979C12.6573 9.21677 12.7251 9.37735 12.7273 9.54544V12.0909C12.7251 12.259 12.6573 12.4196 12.5384 12.5384C12.4196 12.6573 12.259 12.7251 12.0909 12.7273H9.54544C9.37735 12.7251 9.21677 12.6573 9.0979 12.5384C8.97903 12.4196 8.91128 12.259 8.90908 12.0909V9.54544C8.91128 9.37735 8.97903 9.21677 9.0979 9.0979Z",fill:"currentColor"},null,-1),pt=[ct],vt=["id"],ht=n("rect",{width:"14",height:"14",fill:"white"},null,-1),mt=[ht];function _t(v,f,_,R,E,S){return h(),k("svg",Z({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v.pti()),[n("g",{clipPath:"url(#".concat(S.pathId,")")},pt,8,dt),n("defs",null,[n("clipPath",{id:"".concat(S.pathId)},mt,8,vt)])],16)}Ye.render=_t;var gt={root:"p-dataview-layout-options p-selectbutton p-buttonset",listButton:function(f){var _=f.props;return["p-button p-button-icon-only",{"p-highlight":_.modelValue==="list"}]},gridButton:function(f){var _=f.props;return["p-button p-button-icon-only",{"p-highlight":_.modelValue==="grid"}]}},ft={name:"BaseDataViewLayoutOptions",extends:Qe,props:{modelValue:String},css:{classes:gt},provide:function(){return{$parentInstance:this}}},We={name:"DataViewLayoutOptions",extends:ft,emits:["update:modelValue"],data:function(){return{isListButtonPressed:!1,isGridButtonPressed:!1}},methods:{changeLayout:function(f){this.$emit("update:modelValue",f),f==="list"?(this.isListButtonPressed=!0,this.isGridButtonPressed=!1):f==="grid"&&(this.isGridButtonPressed=!0,this.isListButtonPressed=!1)}},computed:{listViewAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.listView:void 0},gridViewAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.gridView:void 0}},components:{BarsIcon:nt,ThLargeIcon:Ye}},bt=["aria-label","aria-pressed"],yt=["aria-label","aria-pressed"];function kt(v,f,_,R,E,S){var j=ue("BarsIcon"),O=ue("ThLargeIcon");return h(),k("div",Z({class:v.cx("root"),role:"group"},v.ptm("root")),[n("button",Z({"aria-label":S.listViewAriaLabel,class:v.cx("listButton"),onClick:f[0]||(f[0]=function(L){return S.changeLayout("list")}),type:"button","aria-pressed":E.isListButtonPressed},v.ptm("listButton")),[$e(v.$slots,"listicon",{},function(){return[u(j,Me(De(v.ptm("listIcon"))),null,16)]})],16,bt),n("button",Z({"aria-label":S.gridViewAriaLabel,class:v.cx("gridButton"),onClick:f[1]||(f[1]=function(L){return S.changeLayout("grid")}),type:"button","aria-pressed":E.isGridButtonPressed},v.ptm("gridButton")),[$e(v.$slots,"gridicon",{},function(){return[u(O,Me(De(v.ptm("gridIcon"))),null,16)]})],16,yt)],16)}We.render=kt;var xt=`
.p-divider-horizontal {
    display: flex;
    width: 100%;
    position: relative;
    align-items: center;
}

.p-divider-horizontal:before {
    position: absolute;
    display: block;
    top: 50%;
    left: 0;
    width: 100%;
    content: '';
}

.p-divider-horizontal.p-divider-left {
    justify-content: flex-start;
}

.p-divider-horizontal.p-divider-right {
    justify-content: flex-end;
}

.p-divider-horizontal.p-divider-center {
    justify-content: center;
}

.p-divider-content {
    z-index: 1;
}

.p-divider-vertical {
    min-height: 100%;
    margin: 0 1rem;
    display: flex;
    position: relative;
    justify-content: center;
}

.p-divider-vertical:before {
    position: absolute;
    display: block;
    top: 0;
    left: 50%;
    height: 100%;
    content: '';
}

.p-divider-vertical.p-divider-top {
    align-items: flex-start;
}

.p-divider-vertical.p-divider-center {
    align-items: center;
}

.p-divider-vertical.p-divider-bottom {
    align-items: flex-end;
}

.p-divider-solid.p-divider-horizontal:before {
    border-top-style: solid;
}

.p-divider-solid.p-divider-vertical:before {
    border-left-style: solid;
}

.p-divider-dashed.p-divider-horizontal:before {
    border-top-style: dashed;
}

.p-divider-dashed.p-divider-vertical:before {
    border-left-style: dashed;
}

.p-divider-dotted.p-divider-horizontal:before {
    border-top-style: dotted;
}

.p-divider-dotted.p-divider-vertical:before {
    border-left-style: dotted;
}
`,Ct={root:function(f){var _=f.props;return["p-divider p-component","p-divider-"+_.layout,"p-divider-"+_.type,{"p-divider-left":_.layout==="horizontal"&&(!_.align||_.align==="left")},{"p-divider-center":_.layout==="horizontal"&&_.align==="center"},{"p-divider-right":_.layout==="horizontal"&&_.align==="right"},{"p-divider-top":_.layout==="vertical"&&_.align==="top"},{"p-divider-center":_.layout==="vertical"&&(!_.align||_.align==="center")},{"p-divider-bottom":_.layout==="vertical"&&_.align==="bottom"}]},content:"p-divider-content"},wt=Il(xt,{name:"divider",manual:!0}),$t=wt.load,Vt={name:"BaseDivider",extends:Qe,props:{align:{type:String,default:null},layout:{type:String,default:"horizontal"},type:{type:String,default:"solid"}},css:{classes:Ct,loadStyle:$t},provide:function(){return{$parentInstance:this}}},el={name:"Divider",extends:Vt},zt=["aria-orientation"];function Bt(v,f,_,R,E,S){return h(),k("div",Z({class:v.cx("root"),role:"separator","aria-orientation":v.layout},v.ptm("root"),{"data-pc-name":"divider"}),[v.$slots.default?(h(),k("div",Z({key:0,class:v.cx("content")},v.ptm("content")),[$e(v.$slots,"default")],16)):m("",!0)],16,zt)}el.render=Bt;const p=v=>(Fl("data-v-b462cd7f"),v=v(),Pl(),v),Lt={class:"flex flex-column flex-grow-1 h-full"},Ut={class:"body-layout flex flex-grow-1 w-full h-full"},Tt={key:1,class:"w-full main-layout"},St={class:"main-layout true flex-grow-1 p-2",id:"sys_users",style:{height:"100vh"}},Ot={class:"module-title module-title-hidden mt-0 ml-1 mb-2"},qt=p(()=>n("i",{class:"pi pi-users"},null,-1)),At={key:0},Nt={class:"p-input-icon-left"},It=p(()=>n("i",{class:"pi pi-search"},null,-1)),Kt={class:"grid formgrid m-2"},Mt={class:"field col-12 md:col-12 flex align-items-center"},Dt=p(()=>n("div",{class:"col-4 p-0"},"Phòng ban:",-1)),Rt={class:"field col-12 md:col-12 flex align-items-center"},Et=p(()=>n("div",{class:"col-4 p-0"},"Chức vụ:",-1)),jt={class:"field col-12 md:col-12 flex align-items-center"},Ht=p(()=>n("div",{class:"col-4 p-0"},"Nhóm người dùng:",-1)),Ft={class:"field col-12 md:col-12 flex align-items-center"},Pt=p(()=>n("div",{class:"col-4 p-0"},"Trạng thái:",-1)),Gt={class:"field col-12 md:col-12 flex align-items-center"},Zt=p(()=>n("div",{class:"col-4 p-0"},"Quyền Module:",-1)),Jt={class:"col-12 field p-0"},Xt={class:"md:col-3 p-2 card-content"},Qt={style:{position:"relative"}},Yt={class:"align-items-center justify-content-center text-center",style:{position:"relative"}},Wt=["onClick"],ea={class:"text-center"},la={class:"m-0"},ta={key:0,class:"mb-1"},aa={class:"mb-1"},na={class:"p-2 w-full",style:{"background-color":"#fff"}},oa={class:"flex align-items-center justify-content-center"},ia={class:"mx-2"},sa={class:"flex flex-column flex-grow-1"},ra={class:"mb-1 mt-0"},ua={style:{"font-size":"10pt",color:"#999"}},da={style:{"font-size":"10pt",color:"#999"}},ca={key:0,class:"align-items-center justify-content-center p-4 text-center"},pa=p(()=>n("img",{src:Wl,height:"144"},null,-1)),va=p(()=>n("h3",{class:"m-1"},"Không có dữ liệu",-1)),ha=[pa,va],ma={class:"grid formgrid m-2"},_a={class:"field col-12 md:col-12"},ga=p(()=>n("label",{class:"col-2 text-left"},[J("Họ tên "),n("span",{class:"redsao"},"(*)")],-1)),fa={key:0,class:"col-10 p-error"},ba={class:"field col-12 md:col-12"},ya=p(()=>n("label",{class:"col-2 text-left"},null,-1)),ka={class:"col-10 pl-3"},xa={key:1,class:"col-10 p-error"},Ca={class:"field col-12 md:col-12"},wa=p(()=>n("label",{class:"col-2 text-left"},null,-1)),$a={class:"col-10 pl-3"},Va={class:"field col-12 md:col-12"},za=p(()=>n("label",{class:"col-2 text-left"},[J("Tên đăng nhập "),n("span",{class:"redsao"},"(*)")],-1)),Ba={key:2,class:"col-10 p-error"},La={class:"field col-12 md:col-12"},Ua=p(()=>n("label",{class:"col-2 text-left"},null,-1)),Ta={class:"col-10 pl-3"},Sa={key:3,class:"col-10 p-error"},Oa={class:"field col-12 md:col-12"},qa=p(()=>n("label",{class:"col-2 text-left"},null,-1)),Aa={class:"col-10 pl-3"},Na={class:"field col-12 md:col-12"},Ia=p(()=>n("label",{class:"col-2 text-left"},[J("Mật khẩu "),n("span",{class:"redsao"},"(*)")],-1)),Ka=p(()=>n("h6",null,"Chọn mật khẩu",-1)),Ma=p(()=>n("p",{class:"mt-2"},"Gợi ý",-1)),Da=p(()=>n("ul",{class:"pl-2 ml-2 mt-0",style:{"line-height":"1.5"}},[n("li",null,"Có ít nhất 1 chữ thường"),n("li",null,"Có ít nhất 1 chữ hoa"),n("li",null,"Có ít nhất 1 ký tự số"),n("li",null,"Tối thiểu 8 ký tự")],-1)),Ra={key:4,class:"col-10 p-error"},Ea={class:"field col-12 md:col-12"},ja=p(()=>n("label",{class:"col-2 text-left"},null,-1)),Ha={class:"col-10 pl-3"},Fa={key:5,class:"col-10 p-error"},Pa={class:"field col-12 md:col-12"},Ga=p(()=>n("label",{class:"col-2 text-left"},null,-1)),Za={class:"col-10 pl-3"},Ja={key:6,class:"col-10 p-error"},Xa={class:"field col-12 md:col-12"},Qa=p(()=>n("label",{class:"col-2 text-left"},null,-1)),Ya={class:"col-10 pl-3"},Wa={class:"field col-12 md:col-12"},en=p(()=>n("label",{class:"col-2 text-left"},"Phòng ban",-1)),ln={class:"field col-12 md:col-12"},tn=p(()=>n("label",{class:"col-2 text-left"},"Nhóm",-1)),an=p(()=>n("label",{class:"col-2 text-left pl-7"},"Chức vụ",-1)),nn={class:"field col-12 md:col-12"},on=p(()=>n("label",{class:"col-2 text-left"},"Ngày sinh",-1)),sn=p(()=>n("label",{class:"col-2 text-left pl-7"},"Admin",-1)),rn={key:0,class:"col-1"},un={key:1,class:"col-2 text-right"},dn={class:"field col-12 md:col-12"},cn=p(()=>n("label",{class:"col-2 text-left"},"Điện thoại",-1)),pn=p(()=>n("label",{class:"col-2 text-left pl-7"},"Email",-1)),vn={class:"field col-12 md:col-12"},hn=p(()=>n("label",{class:"col-2 text-left"},"Trạng thái",-1)),mn=p(()=>n("label",{class:"col-2 text-left pl-7"},"Giới tính",-1)),_n=p(()=>n("label",{class:"col-2"},null,-1)),gn={class:"field col-12 flex align-items-center md:col-12"},fn=p(()=>n("div",{class:"col-2"},null,-1)),bn={class:"col-4"},yn=p(()=>n("div",{class:"col-12 text-center"},"Ảnh đại diện",-1)),kn={class:"inputanh relative",style:{margin:"0 auto"}},xn=["src"],Cn=p(()=>n("div",{class:"col-2 pl-7 text-left"},"STT",-1)),wn=["href"],$n=p(()=>n("p",null,"Kéo và thả tệp vào đây để tải lên.",-1)),Vn="/Portals/Mau Excel/Mẫu Excel Người Dùng.xlsx",zn={__name:"index",setup(v){const f=Ml(),_=Re().public.SecretKey,R=Ee("cryptojs"),E=ke("usl"),S=ke("jwt"),j=ke("u");j.value!=null&&j.value!="undefined"&&xe(j.value,_,R)!=null&&(G("user",()=>JSON.parse(xe(j.value,_,R))),G("islogin",()=>!0)),E.value!=null&&S.value!=null&&G("token",()=>xe(S.value,_,R)),Dl(),Rl();const O=G("user"),L=G("token"),ae=G("islogin");d(!1),d(!0),d();const i=d({full_name:"",is_order:1,is_admin:!0,status:1,party_position_id:""}),U=d(!1),ll={user_id:{required:Ce,maxLength:we(50)},full_name:{required:Ce,maxLength:we(250)},is_psword:{required:Ce,minLength:et(8),maxLength:we(100)},email:{email:lt}},g=Yl(ll,i),tl=d(!1),al=d(!1);d();const nl=d(!1);d(),d(),d();const I=d(!1),Ve=d(),de=d(!1),ze=d(!1),Be=d(!1);d({});const H=d(!0);d();const Le=d([]);d({});const F=d(!1),l=d({search:"",PageNo:1,PageSize:20,Filteruser_id:null,user_id:O.value.user_id,status:null,is_role:!1}),Ue=d(["#F8E69A","#AFDFCF","#F4B2A3","#9A97EC","#CAE2B0","#8BCFFB","#CCADD7"]),$=d();$.value={},$.value[O.value.organization_id]=!0;const A=d();A.value={},A.value[O.value.is_super?-1:O.value.organization_id]=!0;const P=d(),ce=d(!1),X=d(!1),Q=d(!0);let K=[];const c=Ee("$swal"),C=Re().public.apiBase,ne=d("grid");`${L.value}`;const pe=d([{value:0,text:"Khoá"},{value:1,text:"Kích hoạt"},{value:2,text:"Đợi xác thực"}]),Te=d([{value:0,text:"Quyền theo nhóm người dùng"},{value:1,text:"Quyền cá nhân"}]),ol=d([{value:1,text:"Nam"},{value:0,text:"Nữ"}]),ve=d([{role_name:"Admin",role_id:"admin"},{role_name:"Nhân viên",role_id:"nhanvien"},{role_name:"Kho",role_id:"kho"}]),he=d([{position_name:"Admin",position_id:1},{position_name:"Nhân viên",position_id:2},{position_name:"Kho",position_id:3}]),il=d(),Se=d(),sl=d([{label:"Xuất Excel",icon:"pi pi-file-excel",command:a=>{Ul("ExportExcel")}},{label:"Nhập Excel",icon:"pi pi-file-excel",command:a=>{rl()}}]),oe=d(!1),rl=()=>{oe.value=!0,Y=[]};let Y=[];const ul=a=>{Y=[]},dl=a=>{a.files.forEach(e=>{Y.push(e)})},cl=()=>{oe.value=!1;let a=new FormData;c.fire({width:110,didOpen:()=>{c.showLoading()}});for(var e=0;e<Y.length;e++){let o=Y[e];a.append("url_file",o)}a.append("id",JSON.stringify("1234")),$fetch("/api/ImportExcel/Import_User",{method:"POST",baseURL:C,formData:{formData:a},headers:{Authorization:`Bearer ${L.value}`}}).then(o=>{if(o.err!="1"){c.close();var r=o.count?"Đã thêm thành công "+(o.count||0)+" người dùng":"Nhập dữ liệu thành công";f.success(r),w(!0)}else c.fire({title:"Thông báo",html:"Có lỗi xảy ra, vui lòng kiểm tra lại!",icon:"error",confirmButtonText:"OK"})}).catch(o=>{c.close(),c.fire({title:"Thông báo",text:"Có lỗi xảy ra, vui lòng kiểm tra lại!",icon:"error",confirmButtonText:"OK"})})},pl=d([{label:"Sửa thông tin",icon:"pi pi-user-edit",command:a=>{fe(i.value)}},{label:"Xoá",icon:"pi pi-trash",command:a=>{Bl(i.value)}}]),vl=a=>{Ve.value.toggle(a)},hl=()=>{I.value=!0,w(!0)},ml=()=>{l.value.position_id=null,l.value.role_id=null,l.value.status=null,l.value.check_quyen=null,I.value=!1,$.value={},$.value[-1]=!0,w(!0)};je(l,()=>{(l.value.position_id!==null||l.value.role_id!==null||l.value.status!==null||l.value.check_quyen!==null||Object.keys(A.value)[0]!=="-1")&&(I.value=!0),l.value.position_id==null&&l.value.role_id==null&&l.value.check_quyen==null&&l.value.status==null&&Object.keys(A.value)[0]=="-1"&&(I.value=!1)}),je($,()=>{(l.value.position_id!==null||l.value.role_id!==null||l.value.status!==null||l.value.check_quyen!==null||Object.keys(A.value)[0]!=="-1")&&(I.value=!0),l.value.position_id==null&&l.value.role_id==null&&l.value.status==null&&l.value.check_quyen==null&&Object.keys($.value)[0]=="-1"&&(I.value=!1)}),d([]);const _l=(a,e)=>{switch(e){case"Anhdaidien":de.value=!0;break;case"Chuky":ze.value=!0;break;case"Kynhay":Be.value=!0;break}K[e]=a.target.files[0];var o=document.getElementById(e);o.src=URL.createObjectURL(a.target.files[0]),o.onload=function(){URL.revokeObjectURL(o.src)}},gl=()=>{K=[],H.value=!0,U.value=!1,K=[],i.value={full_name:null,is_psword:null,is_order:l.value.totalrecords+1,status:1,role_id:"nhanvien",is_admin:!1,organization_id:O.value.organization_id,display_birthday:!0,email:null,is_booking:!0},i.value.old_ps=i.value.is_psword,X.value=!0,document.querySelector("#AnhUser")&&(document.querySelector("#AnhUser").value=""),document.querySelector("#UserKynhay")&&(document.querySelector("#UserKynhay").value=""),document.querySelector("#UserChuky")&&(document.querySelector("#UserChuky").value="")},fl=a=>{document.getElementById(a).click()},Oe=()=>{X.value=!1},bl=a=>{K[a]=[];var e=document.getElementById(a);switch(e.src=C+"/Portals/Image/noimg.jpg",a){case"Anhdaidien":de.value=!1,i.value.avatar=null;break;case"Chuky":ze.value=!1,i.value.signature=null;break;case"Kynhay":Be.value=!1,i.value.flash_signature=null;break}},yl=()=>{al.value=!1,tl.value=!1,nl.value=!1,l.value={search:"",PageNo:1,PageSize:20,Filteruser_id:null,user_id:O.value.user_id,status:null,tenstatus:"",filter_department:-1,check_quyen:null},ne.value="grid",be.value=!1,w(!0)},kl=()=>{l.value.PageNo=1,w(!0)},xl=d(),ie=d(),Cl=(a,e,o,r)=>{let V=[],x=[];return a.filter(t=>t.parent_id==null).forEach((t,b)=>{t.IsOrder=b+1;let W={key:t[e],data:t};const Ie=(M,ye)=>{let ee=a.filter(T=>T.parent_id==ye);ee.length>0&&(M.children||(M.children=[]),ee.forEach(T=>{let le={key:T[e],data:T};Ie(le,T[e]),M.children.push(le)}))};Ie(W,t[e]),V.push(W),W={key:t[e],data:t[e],label:t[o]};const Ke=(M,ye)=>{let ee=a.filter(T=>T.parent_id==ye);ee.length>0&&(M.children||(M.children=[]),ee.forEach(T=>{let le={key:T[e],data:T[e],label:T[o]};Ke(le,T[e]),M.children.push(le)}))};Ke(W,t[e]),x.push(W)}),x.unshift({key:-1,data:-1,label:"-----Chọn "+r+"----"}),{arrChils:V,arrtreeChils:x}},wl=a=>{$fetch("/api/Proc/CallProc",{method:"POST",baseURL:C,body:{proc:"sys_users_count_1",par:[{par:"search",va:l.value.search},{par:"user_id",va:l.value.user_id},{par:"organization_id",va:l.value.organization_id},{par:"department_id",va:l.value.department_id},{par:"position_id",va:l.value.position_id},{par:"pageno",va:l.value.PageNo},{par:"pagesize",va:l.value.PageSize},{par:"status",va:l.value.status}]},headers:{Authorization:`Bearer ${L.value}`}}).then(e=>{let o=JSON.parse(e.data)[0];o.length>0&&(l.value.totalrecords=o[0].totalrecords,a&&(l.value.totalrecords>l.value.PageSize?F.value=!0:F.value=!1),l.value.totalrecords>0?F.value=!0:F.value=!1)}).catch(e=>{})},$l=a=>{F.value=!0,l.value.PageNo=a.page+1,l.value.PageSize=a.rows,w(!0)},me=a=>{$.value={},a?(l.value.department_id=a.department_id,l.value.organization_id=a.organization_id,l.value.organization_name=a.organization_name,$.value[l.value.department_id]=!0):(l.value.department_id=null,l.value.organization_name=null,l.value.organization_id=null,$.value[O.value.organization_id]=!0),l.value.PageNo=1,w(!0)},_e=a=>{a?(l.value.position_id=a.position_id,l.value.position_name=a.position_name):(l.value.position_id=null,l.value.position_name=null),l.value.PageNo=1,w(!0)},ge=a=>{a?(l.value.role_id=a.role_id,l.value.role_name=a.role_name,l.value.text_color=a.text_color,l.value.background_color=a.background_color):(l.value.role_id=null,l.value.role_name=null),l.value.PageNo=1,w(!0)},se=a=>{a?(l.value.status=a.status,l.value.tenstatus=a.tenstatus):(l.value.status=null,l.value.tenstatus=null),l.value.PageNo=1,w(!0)},qe=a=>{a?(l.value.check_quyen=a.check_quyen,l.value.check_quyen_label=a.check_quyen_label):(l.value.check_quyen=null,l.value.check_quyen_label=null),l.value.PageNo=1,w(!0)},Vl=d([]),w=(a,e)=>{l.value.role_id!=null?l.value.role_name=ve.value.filter(o=>o.role_id==l.value.role_id)[0].role_name:l.value.role_name=null,l.value.status!=null?l.value.tenstatus=pe.value.filter(o=>o.value==l.value.status)[0].text:l.value.tenstatus=null,l.value.position_id!=null?l.value.position_name=he.value.filter(o=>o.position_id==l.value.position_id)[0].position_name:l.value.position_name=null,A.value!==null&&(l.value.filter_department=parseInt(Object.keys(A.value)[0])),l.value.check_quyen!=null?l.value.check_quyen_label=Te.value.filter(o=>o.value==l.value.check_quyen)[0].text:l.value.check_quyen_label=null,a&&(l.value.loading=!0,c.fire({width:110,didOpen:()=>{c.showLoading()}}),wl()),$fetch("/api/Proc/CallProc",{method:"POST",baseURL:C,body:{proc:"sys_users_list_3",par:[{par:"search",va:l.value.search},{par:"user_id",va:l.value.user_id},{par:"organization_id",va:l.value.organization_id},{par:"department_id",va:l.value.department_id},{par:"position_id",va:l.value.position_id},{par:"pageno",va:l.value.PageNo||1},{par:"pagesize",va:l.value.PageSize||20},{par:"status",va:l.value.status}]},headers:{Authorization:`Bearer ${L.value}`}}).then(o=>{let r=JSON.parse(o.data)[0],V=JSON.parse(o.data)[1];Vl.value=V??[],r.length>0?(r.forEach((x,t)=>{let b=x.full_name.split(" ");x.lastName=b[b.length-1],x.stt=t+1}),P.value=r):P.value=[],Q.value&&(Q.value=!1),a&&(l.value.loading=!1,c.close()),(e||be.value==!0)&&Sl()}).catch(o=>{console.log(o),o&&o.status===401&&c.fire({text:"Mã token đã hết hạn hoặc không hợp lệ, vui lòng đăng nhập lại!",confirmButtonText:"OK"})})},fe=a=>{K=[],U.value=!1,H.value=!1,c.fire({width:110,didOpen:()=>{c.showLoading()}}),X.value=!0,$fetch("/api/Proc/CallProc",{method:"POST",baseURL:C,body:{proc:"sys_users_get",par:[{par:"user_id",va:a.user_id}]},headers:{Authorization:`Bearer ${L.value}`}}).then(e=>{c.close();let o=JSON.parse(e.data);if(o.length>0){if(i.value=o[0][0],i.value.old_ps=i.value.is_psword,i.value.birthday){var r=new Date(i.value.birthday);i.value.birthday=new Date(r.getFullYear(),r.getMonth(),r.getDate())}$.value={},$.value[i.value.department_id||"-1"]=!0}}).catch(e=>{e.status===401&&c.fire({text:"Mã token đã hết hạn hoặc không hợp lệ, vui lòng đăng nhập lại!",confirmButtonText:"OK"})})},Ae=a=>{if(U.value=!0,!a)return;if(i.value.user_id.length>50){c.fire({title:"Thông báo!",text:"Vui lòng chọn tên đăng nhập không quá 50 ký tự!",icon:"error",confirmButtonText:"OK"});return}if(i.value.full_name.length>500){c.fire({title:"Thông báo!",text:"Vui lòng chọn họ tên không quá 500 ký tự!",icon:"error",confirmButtonText:"OK"});return}if(i.value.is_psword.length<8){c.fire({title:"Thông báo!",text:"Vui lòng chọn mật khẩu có ít nhất 8 ký tự!",icon:"error",confirmButtonText:"OK"});return}if(!i.value.role_id){c.fire({title:"Thông báo!",text:"Vui lòng chọn nhóm người dùng!",icon:"error",confirmButtonText:"OK"});return}let e=/^(?=.*[0-9])(?=.*[a-zA-Z])(?=.*\W)(?!.* ).{8,}$/;if(H.value==!1){if(i.value.is_psword!=i.value.old_ps&&!e.test(i.value.is_psword)){c.fire({title:"Thông báo!",text:"Vui lòng chọn mật khẩu có ít nhất 8 ký tự, có chứa tối thiểu 1 chữ cái, 1 chữ số và 1 ký tự đặc biệt!",icon:"error",confirmButtonText:"OK"});return}}else if(i.value.is_psword!=i.value.old_ps&&!e.test(i.value.is_psword)){c.fire({title:"Thông báo!",text:"Vui lòng chọn mật khẩu có ít nhất 8 ký tự, có chứa tối thiểu 1 chữ cái, 1 chữ số và 1 ký tự đặc biệt!",icon:"error",confirmButtonText:"OK"});return}let o=Object.keys($.value);if(i.value.department_id=o[0],i.value.department_id==-1&&(i.value.department_id=null,i.value.organization_id=null),i.value.department_id){const r=Zl(ie.value,i.value.department_id,"key");i.value.organization_id=r.key}i.value.organization_id=O.value.organization_id,i.value.full_name&&(i.value.last_name=i.value.full_name.split(" ").slice(-1).join(" "),i.value.full_name_en=Ol(i.value.full_name)),zl()},zl=()=>{let a=new FormData;for(var e in K){let o=K[e];a.append(e,o)}a.append("model",JSON.stringify(i.value)),c.fire({width:110,didOpen:()=>{c.showLoading()}}),$fetch(`/api/Users/${H.value==!1?"Update_Users":"Add_Users"}`,{method:H.value==!1?"put":"post",baseURL:C,body:a,headers:{Authorization:`Bearer ${L.value}`}}).then(o=>{o.err!="1"?(c.close(),f.success("Cập nhật User thành công!"),w(!0),Oe()):c.fire({title:"Thông báo!",text:o.ms,icon:"error",confirmButtonText:"OK"})}).catch(o=>{console.log("as",o),c.close(),c.fire({title:"Thông báo!",text:"Có lỗi xảy ra, vui lòng kiểm tra lại!",icon:"error",confirmButtonText:"OK"})})},Bl=a=>{c.fire({title:"Thông báo",text:"Bạn có muốn xoá người dùng này không!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Có",cancelButtonText:"Không"}).then(e=>{if(e.isConfirmed){c.fire({width:110,didOpen:()=>{c.showLoading()}});let o=null;a!=null?o=[a.user_id]:o=Le.value,Array.isArray(o)!=!0&&(o=[o]),$fetch("/api/Users/Del_Users",{method:"delete",baseURL:C,body:o,headers:{Authorization:`Bearer ${L.value}`}}).then(r=>{r.err!="1"?(c.close(),f.success("Xoá User thành công!"),w(!0),a||(Le.value=[])):c.fire({title:"Thông báo!",text:"Xóa không thành công, vui lòng thử lại",icon:"error",confirmButtonText:"OK"})}).catch(r=>{c.close(),r.status===401&&c.fire({text:"Mã token đã hết hạn hoặc không hợp lệ, vui lòng đăng nhập lại!",confirmButtonText:"OK"})})}})},Ll=()=>{c.fire({title:"Thông báo",text:"Bạn có muốn xóa danh sách người dùng này không!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Có",cancelButtonText:"Không"}).then(a=>{if(a.isConfirmed){c.fire({width:110,didOpen:()=>{c.showLoading()}});let e=P.value.filter(r=>r.chon==!0).map(r=>r.user_id),o=e??1;$fetch("/api/Users/Del_Users",{method:"delete",baseURL:C,body:{send:o},headers:{Authorization:`Bearer ${L.value}`}}).then(r=>{c.close(),r.err!="1"?(c.close(),f.success("Xoá người dùng thành công!"),w(!0)):c.fire({title:"Thông báo!",text:"Xóa không thành công, vui lòng thử lại",icon:"error",confirmButtonText:"OK"})}).catch(r=>{c.close(),r.status===401&&c.fire({text:"Mã token đã hết hạn hoặc không hợp lệ, vui lòng đăng nhập lại!",confirmButtonText:"OK"})})}})},Ul=a=>{c.fire({width:110,didOpen:()=>{c.showLoading()}});let e="sys_users_listexport1";a=="ExportExcelMau"&&(e="sys_users_listexport_mau"),$fetch("/api/Excel/"+a,{method:"post",baseURL:C,body:{excelname:"DANH SÁCH NGƯỜI DÙNG",proc:e,par:[{par:"search",va:l.value.search},{par:"user_id",va:l.value.user_id},{par:"role_id",va:l.value.role_id},{par:"organization_id",va:l.value.organization_id},{par:"department_id",va:l.value.department_id},{par:"position_id",va:l.value.position_id},{par:"filter_department",va:l.value.filter_department},{par:"filter_permission",va:l.value.check_quyen},{par:"status",va:l.value.status}]},headers:{Authorization:`Bearer ${L.value}`}}).then(o=>{if(c.close(),o.err!="1"){if(c.close(),f.success("Kết xuất Data thành công!"),o.path!=null){var r=o.path.replace(/\\+/g,"/").replace(/\/+/g,"/").replace(/^\//g,"").split("/"),V="";r.forEach(t=>{t.trim()!=""&&(V+="/"+t)}),window.open(baseURL+V)}}else c.fire({title:"Thông báo!",text:o.ms,icon:"error",confirmButtonText:"OK"})}).catch(o=>{o.status===401&&c.fire({text:"Mã token đã hết hạn hoặc không hợp lệ, vui lòng đăng nhập lại!",confirmButtonText:"OK"})})};d(!1),d([]);const Tl=()=>{P.value.filter(a=>a.chon==!0).length>0?ce.value=!0:ce.value=!1},be=d(!1),Sl=()=>{const a=e=>{e.children&&e.children.forEach(r=>{a(r)});let o=P.value.filter(r=>r.organization_id==e.key);if(o.length>0)if(e.children||(e.children=[]),e.children=[],e.children=e.children.concat({data:{organization_name:"",IsDonvi:!1},users:o}),!e.data.organization_name.includes("("))e.data.organization_name=e.data.organization_name+" ("+o.length+")";else{let r=e.data.organization_name.indexOf("("),V=e.data.organization_name.length,x=e.data.organization_name.substring(r,V);e.data.organization_name=e.data.organization_name.replace(x," ("+o.length+")")}else if(e.children=[],!e.data.organization_name.includes("("))e.data.organization_name=e.data.organization_name+" ("+o.length+")";else{let r=e.data.organization_name.indexOf("("),V=e.data.organization_name.length,x=e.data.organization_name.substring(r,V);e.data.organization_name=e.data.organization_name.replace(x," ("+o.length+")")}};xl.value.forEach(e=>{a(e)})};function Ol(a){return a=a.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a"),a=a.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e"),a=a.replace(/ì|í|ị|ỉ|ĩ/g,"i"),a=a.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o"),a=a.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u"),a=a.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y"),a=a.replace(/đ/g,"d"),a=a.replace(/À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ/g,"A"),a=a.replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ/g,"E"),a=a.replace(/Ì|Í|Ị|Ỉ|Ĩ/g,"I"),a=a.replace(/Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ/g,"O"),a=a.replace(/Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ/g,"U"),a=a.replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ/g,"Y"),a=a.replace(/Đ/g,"D"),a=a.replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g,""),a=a.replace(/\u02C6|\u0306|\u031B/g,""),a=a.replace(/ + /g," "),a=a.trim(),a=a.replace(/!|@|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\;|\'|\"|\&|\#|\[|\]|~|\$|_|`|-|{|}|\||\\/g," "),a}const ql=a=>{a&&(l.value.loading=!0),$fetch("/api/Proc/CallProc",{method:"post",baseURL:C,body:{proc:"sys_organization_list_main",par:[{par:"pageno",va:0},{par:"pagesize",va:1e4},{par:"search",va:null},{par:"user_id",va:O.value.user_id}]},headers:{Authorization:`Bearer ${L.value}`}}).then(e=>{let o=JSON.parse(e.data);if(o.length>0){let r=Cl(o[0],"organization_id","organization_name","đơn vị");ie.value=r.arrtreeChils}Q.value&&(Q.value=!1),a&&(l.value.loading=!1)}).catch(e=>{e&&e.status===401&&c.fire({text:"Mã token đã hết hạn hoặc không hợp lệ, vui lòng đăng nhập lại!",confirmButtonText:"OK"})})},Ne=(a,e,o)=>{i.value=e,i.value.old_ps=i.value.is_psword,Se.value.toggle(a)};return El(()=>{w(!0),ql(!0)}),(a,e)=>{const o=ue("InputText"),r=ue("Button"),V=He("tooltip"),x=He("ripple");return h(),k("div",Lt,[s(ae)?(h(),B(Jl,{key:0})):m("",!0),n("div",Ut,[s(ae)?(h(),B(Xl,{key:0,class:"shadow-1 h-full"})):m("",!0),s(ae)?(h(),k("div",Tt,[n("div",St,[be.value?m("",!0):(h(),B(s(at),{key:0,class:"w-full d-dataview-user h-full flex flex-column",lazy:!0,value:P.value,layout:ne.value,loading:l.value.loading,paginator:F.value,rows:l.value.PageSize,totalRecords:l.value.totalrecords,pageLinkSize:l.value.PageSize,onPage:e[12]||(e[12]=t=>$l(t)),paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",rowsPerPageOptions:[20,30,50,100,200],currentPageReportTemplate:"",responsiveLayout:"scroll",scrollable:!0},{header:y(()=>[n("h3",Ot,[qt,J(" Người dùng "),l.value.totalrecords>0?(h(),k("span",At,"("+z(l.value.totalrecords)+")",1)):m("",!0),l.value.role_name?(h(),B(s(q),{key:1,class:"custom-chip ml-2 mr-1",onRemove:e[0]||(e[0]=t=>ge()),label:l.value.role_name,style:te({background:l.value.background_color,color:l.value.text_color}),removable:""},null,8,["label","style"])):m("",!0),l.value.position_name?(h(),B(s(q),{key:2,class:"custom-chip ml-2 mr-1",onRemove:e[1]||(e[1]=t=>_e()),label:l.value.position_name,removable:""},null,8,["label"])):m("",!0),l.value.department_id||l.value.organization_id?(h(),B(s(q),{key:3,class:"custom-chip chippb ml-2 mr-1",onRemove:e[2]||(e[2]=t=>me()),label:l.value.organization_name,removable:""},null,8,["label"])):m("",!0),l.value.tenstatus?(h(),B(s(q),{key:4,class:D(["custom-chip ml-2 mr-1","chip-"+(l.value.status==0?"danger":l.value.status==1?"success":"warning")]),onRemove:e[3]||(e[3]=t=>se()),label:l.value.tenstatus,removable:""},null,8,["class","label"])):m("",!0),l.value.check_quyen_label?(h(),B(s(q),{key:5,class:"custom-chip chippb ml-2 mr-1",onRemove:e[4]||(e[4]=t=>qe()),label:l.value.check_quyen_label,removable:""},null,8,["label"])):m("",!0)]),u(s(Ge),{class:"w-full custoolbar"},{start:y(()=>[n("div",Nt,[It,u(o,{type:"text",spellcheck:"false",modelValue:l.value.search,"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.search=t),placeholder:"Tìm kiếm",onKeyup:jl(kl,["enter"])},null,8,["modelValue","onKeyup"])]),u(r,{class:D(I.value?"ml-2":"ml-2 p-button-secondary p-button-outlined"),icon:"pi pi-filter",onClick:vl,"aria-haspopup":"true","aria-controls":"overlay_panelS"},null,8,["class"]),u(s(ot),{ref_key:"filterButs",ref:Ve,appendTo:"body",showCloseIcon:!1,id:"overlay_panelS",style:{width:"350px"},breakpoints:{"960px":"20vw"}},{default:y(()=>[n("div",Kt,[n("div",Mt,[Dt,u(s(Xe),{class:"col-8 p-0",modelValue:A.value,"onUpdate:modelValue":e[6]||(e[6]=t=>A.value=t),options:ie.value,showClear:!0,"max-height":200,placeholder:"Chọn phòng ban",optionLabel:"organization_name",optionValue:"organization_id"},null,8,["modelValue","options"])]),n("div",Rt,[Et,u(s(N),{showClear:!0,modelValue:l.value.position_id,"onUpdate:modelValue":e[7]||(e[7]=t=>l.value.position_id=t),options:he.value,optionLabel:"position_name",optionValue:"position_id",placeholder:"Chọn chức vụ",class:"p-dropdown-sm col-8 p-0"},null,8,["modelValue","options"])]),n("div",jt,[Ht,u(s(N),{showClear:!0,modelValue:l.value.role_id,"onUpdate:modelValue":e[8]||(e[8]=t=>l.value.role_id=t),options:ve.value,optionLabel:"role_name",optionValue:"role_id",placeholder:"Chọn nhóm người dùng",class:"p-dropdown-sm col-8 p-0"},null,8,["modelValue","options"])]),n("div",Ft,[Pt,u(s(N),{showClear:!0,modelValue:l.value.status,"onUpdate:modelValue":e[9]||(e[9]=t=>l.value.status=t),options:pe.value,optionLabel:"text",optionValue:"value",placeholder:"Chọn trạng thái",class:"p-dropdown-sm col-8 p-0"},null,8,["modelValue","options"])]),n("div",Gt,[Zt,u(s(N),{showClear:!0,modelValue:l.value.check_quyen,"onUpdate:modelValue":e[10]||(e[10]=t=>l.value.check_quyen=t),options:Te.value,optionLabel:"text",optionValue:"value",placeholder:"Chọn loại quyền",class:"p-dropdown-sm col-8 p-0"},null,8,["modelValue","options"])]),n("div",Jt,[u(s(Ge),{class:"toolbar-filter"},{start:y(()=>[u(r,{onClick:ml,class:"p-button-outlined",label:"Xóa"})]),end:y(()=>[u(r,{onClick:hl,label:"Lọc"})]),_:1})])])]),_:1},512)]),end:y(()=>[u(r,{label:"Thêm người dùng",icon:"pi pi-plus",class:"mr-2",onClick:gl}),u(s(We),{modelValue:ne.value,"onUpdate:modelValue":e[11]||(e[11]=t=>ne.value=t)},null,8,["modelValue"]),u(r,{class:"mr-2 ml-2 p-button p-button-outlined p-button-secondary",icon:"pi pi-refresh",onClick:yl}),ce.value?(h(),B(r,{key:0,label:"Xoá",icon:"pi pi-trash",class:"mr-2 p-button-danger",onClick:Ll})):m("",!0),u(r,{label:"Tiện ích",icon:"pi pi-file-excel",class:"mr-2 p-button p-button-outlined p-button-secondary","aria-haspopup":"true","aria-controls":"overlay_Export"}),u(s(Fe),{id:"overlay_Export",ref_key:"menuButs",ref:il,model:sl.value,popup:!0},null,8,["model"])]),_:1})]),grid:y(t=>[n("div",Xt,[u(s(tt),{class:"no-paddcontent"},{title:y(()=>[n("div",Qt,[n("div",Yt,[u(s(Pe),{label:t.data.avatar?"":t.data.lastName.substring(0,1).toUpperCase(),image:s(C)+t.data.avatar,style:te([{"background-color":"#2196f3",color:"#ffffff",width:"8rem",height:"8rem"},{background:Ue.value[t.data.stt%7]}]),class:"mr-2",size:"xlarge",shape:"circle"},null,8,["label","image","style"]),u(r,{onClick:b=>se(t.data),class:D("p-button p-button-"+(t.data.status==0?"danger":t.data.status==1?"success":"warning")+" p-button-rounded dot-status")},null,8,["onClick","class"]),u(r,{onClick:b=>se(t.data),class:D("p-button p-button-"+(t.data.status==0?"danger":t.data.status==1?"success":"warning")+" p-button-rounded dot-status")},null,8,["onClick","class"]),t.data.check_quyen==1?re((h(),k("i",{key:0,onClick:b=>qe(t.data),class:"pi pi-star-fill icon-quyen"},null,8,Wt)),[[V,t.data.check_quyen_label,void 0,{top:!0}]]):m("",!0)]),u(r,{style:{position:"absolute",right:"0px",top:"0px"},icon:"pi pi-ellipsis-h",class:"p-button-rounded p-button-text ml-2",onClick:b=>Ne(b,t.data),"aria-haspopup":"true","aria-controls":"overlay_More"},null,8,["onClick"])])]),content:y(()=>[n("div",ea,[u(r,{class:"p-button-text m-auto block",style:{color:"inherit"},onClick:b=>fe(t.data)},{default:y(()=>[n("h3",la,z(t.data.full_name),1)]),_:2},1032,["onClick"]),re(u(s(q),{onClick:b=>me(t.data),class:"m-1 chippb p-ripple",label:t.data.organization_name},null,8,["onClick","label"]),[[x]]),t.data.position_name?(h(),k("div",ta,[re(u(s(q),{onClick:b=>_e(t.data),class:"p-ripple chip2",label:t.data.position_name},null,8,["onClick","label"]),[[x]])])):m("",!0),n("div",aa,[re(u(s(q),{onClick:b=>ge(t.data),class:"p-ripple",style:te({background:t.data.background_color,color:t.data.text_color}),label:t.data.role_name},null,8,["onClick","style","label"]),[[x]])])])]),_:2},1024)])]),list:y(t=>[n("div",na,[n("div",oa,[n("div",ia,[u(s(it),{id:"IsIdentity",modelValue:t.data.chon,"onUpdate:modelValue":b=>t.data.chon=b,binary:!0,onChange:Tl},null,8,["modelValue","onUpdate:modelValue"])]),u(s(Pe),{label:t.data.avatar?"":t.data.lastName.substring(0,1).toUpperCase(),image:s(C)+t.data.avatar,style:te([{"background-color":"#2196f3",color:"#ffffff"},{background:Ue.value[t.data.stt%7]}]),class:"mr-2",size:"xlarge",shape:"circle"},null,8,["label","image","style"]),n("div",sa,[u(r,{class:"p-button-text p-0",style:{color:"inherit",padding:"0 !important"},onClick:b=>fe(t.data)},{default:y(()=>[n("h3",ra,z(t.data.full_name),1)]),_:2},1032,["onClick"]),n("i",ua,z(t.data.user_id)+" "+z(t.data.phone?"| "+t.data.phone:""),1),n("i",da,z(t.data.email),1)]),u(s(q),{onClick:b=>me(t.data),class:"ml-2 mr-2 chippb",label:t.data.organization_name},null,8,["onClick","label"]),t.data.position_name?(h(),B(s(q),{key:0,onClick:b=>_e(t.data),class:"ml-2 mr-2 chip2",label:t.data.position_name},null,8,["onClick","label"])):m("",!0),u(s(q),{onClick:b=>ge(t.data),class:"ml-2 mr-2",style:te({background:t.data.background_color,color:t.data.text_color}),label:t.data.role_name},null,8,["onClick","style","label"]),u(r,{onClick:b=>se(t.data),label:t.data.tenstatus,class:D("ml-2 mr-2 p-button p-button-"+(t.data.status==0?"danger":t.data.status==1?"success":"warning")+" p-button-rounded")},null,8,["onClick","label","class"]),u(r,{icon:"pi pi-ellipsis-h",class:"p-button-outlined p-button-secondary ml-2",onClick:b=>Ne(b,t.data),"aria-haspopup":"true","aria-controls":"overlay_More"},null,8,["onClick"])])])]),empty:y(()=>[Q.value?m("",!0):(h(),k("div",ca,ha))]),_:1},8,["value","layout","loading","paginator","rows","totalRecords","pageLinkSize"]))]),u(s(Fe),{id:"overlay_More",ref_key:"menuButMores",ref:Se,model:pl.value,popup:!0},null,8,["model"]),u(s(Je),{header:"Cập nhật người dùng",visible:X.value,"onUpdate:visible":e[32]||(e[32]=t=>X.value=t),style:{width:"55vw"},maximizable:!0,closable:!0,modal:!0},{footer:y(()=>[u(r,{label:"Huỷ",icon:"pi pi-times",onClick:Oe,class:"p-button-raised p-button-secondary"}),u(r,{label:"Cập nhật",icon:"pi pi-save",onClick:e[31]||(e[31]=t=>Ae(!s(g).$invalid))})]),default:y(()=>[n("form",{onSubmit:e[30]||(e[30]=Hl(t=>Ae(!s(g).$invalid),["prevent"])),name:"submitform"},[n("div",ma,[n("div",_a,[ga,u(o,{spellcheck:"false",class:D(["col-10 ip32 text-transform",{"p-invalid":s(g).full_name.$invalid&&U.value}]),modelValue:i.value.full_name,"onUpdate:modelValue":e[13]||(e[13]=t=>i.value.full_name=t),autocomplete:"username",name:"full_name"},null,8,["modelValue","class"])]),s(g).full_name.required.$invalid&&U.value||s(g).full_name.required.$pending.$response?(h(),k("small",fa,[n("div",ba,[ya,n("span",ka,z(s(g).full_name.required.$message.replace("Value","Tên người dùng").replace("is required","không được để trống")),1)])])):m("",!0),s(g).full_name.maxLength.$invalid&&U.value||s(g).full_name.maxLength.$pending.$response?(h(),k("small",xa,[n("div",Ca,[wa,n("span",$a,z(s(g).full_name.maxLength.$message.replace("The maximum length allowed is","Tên người dùng không được vượt quá"))+" ký tự",1)])])):m("",!0),n("div",Va,[za,u(o,{spellcheck:"false",disabled:!H.value,class:D(["col-10 ip32",{"p-invalid":s(g).user_id.$invalid&&U.value}]),modelValue:i.value.user_id,"onUpdate:modelValue":e[14]||(e[14]=t=>i.value.user_id=t)},null,8,["disabled","modelValue","class"])]),s(g).user_id.required.$invalid&&U.value||s(g).user_id.required.$pending.$response?(h(),k("small",Ba,[n("div",La,[Ua,n("span",Ta,z(s(g).user_id.required.$message.replace("Value","Tên đăng nhập").replace("is required","không được để trống")),1)])])):m("",!0),s(g).user_id.maxLength.$invalid&&U.value||s(g).user_id.maxLength.$pending.$response?(h(),k("small",Sa,[n("div",Oa,[qa,n("span",Aa,z(s(g).user_id.maxLength.$message.replace("The maximum length allowed is","Tên đăng nhập không được vượt quá"))+" ký tự",1)])])):m("",!0),n("div",Na,[Ia,u(s(Gl),{style:{cursor:"pointer",width:"33.33%"},modelValue:i.value.is_psword,"onUpdate:modelValue":e[15]||(e[15]=t=>i.value.is_psword=t),autocomplete:"new-password",class:"ip32"},{header:y(()=>[Ka]),footer:y(t=>[J(z(t.level)+" ",1),u(s(el)),Ma,Da]),_:1},8,["modelValue"])]),s(g).is_psword.required.$invalid&&U.value||s(g).is_psword.required.$pending.$response?(h(),k("small",Ra,[n("div",Ea,[ja,n("span",Ha,z(s(g).is_psword.required.$message.replace("Value","Mật khẩu").replace("is required","không được để trống")),1)])])):m("",!0),s(g).is_psword.minLength.$invalid&&U.value?(h(),k("small",Fa,[n("div",Pa,[Ga,n("span",Za,z(s(g).is_psword.minLength.$message.replace("This field should be at least","Mật khẩu không được ít hơn").replace("long","ký tự")),1)])])):m("",!0),s(g).is_psword.maxLength.$invalid&&U.value?(h(),k("small",Ja,[n("div",Xa,[Qa,n("span",Ya,z(s(g).is_psword.maxLength.$message.replace("The maximum length allowed is","Mật khẩu không được vượt quá"))+" ký tự",1)])])):m("",!0),n("div",Wa,[en,u(s(Xe),{class:"col-10 ip32",modelValue:$.value,"onUpdate:modelValue":e[16]||(e[16]=t=>$.value=t),options:ie.value,showClear:!0,"max-height":200,placeholder:"",optionLabel:"data.organization_name",optionValue:"data.department_id"},null,8,["modelValue","options"])]),n("div",ln,[tn,u(s(N),{class:"col-4 ip32",modelValue:i.value.role_id,"onUpdate:modelValue":e[17]||(e[17]=t=>i.value.role_id=t),options:ve.value,optionLabel:"role_name",optionValue:"role_id",placeholder:"Chọn nhóm",showClear:!0},null,8,["modelValue","options"]),an,u(s(N),{class:"col-4 ip32",modelValue:i.value.position_id,"onUpdate:modelValue":e[18]||(e[18]=t=>i.value.position_id=t),options:he.value,optionLabel:"position_name",optionValue:"position_id",placeholder:"Chọn chức vụ",showClear:!0},null,8,["modelValue","options"])]),n("div",nn,[on,u(s(rt),{class:"col-4 ip32",id:"icon",modelValue:i.value.birthday,"onUpdate:modelValue":e[19]||(e[19]=t=>i.value.birthday=t),showIcon:!0},null,8,["modelValue"]),sn,u(s(Ze),{class:"col-1 w-4rem lck-checked",modelValue:i.value.is_admin,"onUpdate:modelValue":e[20]||(e[20]=t=>i.value.is_admin=t)},null,8,["modelValue"]),i.value.is_super?(h(),k("label",rn)):m("",!0),i.value.is_super?(h(),k("label",un,"Is Super")):m("",!0),i.value.is_super?(h(),B(s(Ze),{key:2,modelValue:i.value.is_super,"onUpdate:modelValue":e[21]||(e[21]=t=>i.value.is_super=t)},null,8,["modelValue"])):m("",!0)]),n("div",dn,[cn,u(o,{class:"col-4 ip32",spellcheck:"false",modelValue:i.value.phone,"onUpdate:modelValue":e[22]||(e[22]=t=>i.value.phone=t)},null,8,["modelValue"]),pn,u(o,{class:"col-4 ip32",spellcheck:"false",modelValue:i.value.email,"onUpdate:modelValue":e[23]||(e[23]=t=>i.value.email=t)},null,8,["modelValue"])]),n("div",vn,[hn,u(s(N),{class:"col-4 ip32",modelValue:i.value.status,"onUpdate:modelValue":e[24]||(e[24]=t=>i.value.status=t),options:pe.value,optionLabel:"text",optionValue:"value",placeholder:"Chọn trạng thái"},null,8,["modelValue","options"]),mn,u(s(N),{class:"col-4 ip32",modelValue:i.value.gender,"onUpdate:modelValue":e[25]||(e[25]=t=>i.value.gender=t),options:ol.value,optionLabel:"text",optionValue:"value",placeholder:"Chọn giới tính"},null,8,["modelValue","options"])]),_n,n("div",gn,[fn,n("div",bn,[yn,n("div",kn,[n("img",{onClick:e[26]||(e[26]=t=>fl("AnhUser")),id:"Anhdaidien",src:i.value.avatar?s(C)+i.value.avatar:s(C)+"/Portals/Image/noimg.jpg"},null,8,xn),i.value.avatar||de.value?(h(),B(r,{key:0,style:{width:"1.5rem",height:"1.5rem"},icon:"pi pi-times",onClick:e[27]||(e[27]=t=>bl("Anhdaidien")),class:"p-button-rounded absolute top-0 right-0 cursor-pointer"})):m("",!0),n("input",{class:"ipnone",id:"AnhUser",type:"file",accept:"image/*",onChange:e[28]||(e[28]=t=>_l(t,"Anhdaidien"))},null,32)])]),Cn,u(s(st),{class:"w-full ip32 p-0",modelValue:i.value.is_order,"onUpdate:modelValue":e[29]||(e[29]=t=>i.value.is_order=t)},null,8,["modelValue"])])])],32)]),_:1},8,["visible"]),u(s(Je),{header:"Tải lên file Excel",visible:oe.value,"onUpdate:visible":e[33]||(e[33]=t=>oe.value=t),style:{width:"40vw"},closable:!0},{footer:y(()=>[u(r,{label:"Lưu",icon:"pi pi-check",onClick:cl})]),default:y(()=>[n("h3",null,[n("label",null,[n("a",{href:s(C)+Vn,download:""},"Nhấn vào đây",8,wn),J(" để tải xuống tệp mẫu. ")])]),n("form",null,[u(s(ut),{accept:".xls,.xlsx",onRemove:ul,onSelect:dl,"show-upload-button":!1,"choose-label":"Chọn tệp","cancel-label":"Hủy",fileLimit:1,invalidFileTypeMessage:"Chỉ chấp nhận file dạng .xsl,.xlsx,.slsm,.csv"},{empty:y(()=>[$n]),_:1},8,["invalidFileTypeMessage"])])]),_:1},8,["visible"])])):m("",!0),s(ae)?m("",!0):(h(),B(Ql,{key:2}))])])}}},Hn=Kl(zn,[["__scopeId","data-v-b462cd7f"]]);export{Hn as default};
